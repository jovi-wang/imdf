service: imdf-slack-app

frameworkVersion: ">=1.1.0 <2.0.0"

plugins:
  - serverless-webpack
custom:
  webpackIncludeModules: true 

provider:
  name: aws
  stage: ${opt:stage}
  runtime: nodejs8.10
  region: ${opt:region}
  iamRoleStatements:
    - Effect: Allow
      Action:
        - "iot:*"
      Resource: "arn:aws:iot:*:*:*" 
    
functions:
  webhook:
    handler: handler.webhook
    environment:
      SLACK_SIGNING_SECRET: 'xxxxxx'
      USER_LIST: 'vmrcompanion/test/jovi,vmrcompanion/test/haris, vmrcompanion/test/james'
      COMMAND_LIST: '%2Fwfh,%2Fwfo'
      MQTT_ENDPOINT: 'mqtt-endpoint'
      TOPIC: 'topic'
    events:
      - http:
          method: POST
          path: /command
    
